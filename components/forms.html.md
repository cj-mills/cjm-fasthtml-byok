# Forms


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Basic Key Input Form

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-byok/blob/main/cjm_fasthtml_byok/components/forms.py#L42"
target="_blank" style="float:right; font-size:smaller">source</a>

### KeyInputForm

>  KeyInputForm (provider:str, action:Optional[str]=None, method:str='post',
>                    show_help:bool=True, custom_placeholder:Optional[str]=None,
>                    extra_fields:Optional[List[tuple]]=None,
>                    provider_config:Optional[Dict[str,Any]]=None)

*Create a form for inputting an API key with improved design.*

<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 25%" />
<col style="width: 34%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>provider</td>
<td>str</td>
<td></td>
<td>The API provider identifier</td>
</tr>
<tr>
<td>action</td>
<td>Optional</td>
<td>None</td>
<td>Form action URL (defaults to /api/keys/{provider})</td>
</tr>
<tr>
<td>method</td>
<td>str</td>
<td>post</td>
<td>HTTP method (default: “post”)</td>
</tr>
<tr>
<td>show_help</td>
<td>bool</td>
<td>True</td>
<td>Whether to show help text</td>
</tr>
<tr>
<td>custom_placeholder</td>
<td>Optional</td>
<td>None</td>
<td>Custom placeholder text</td>
</tr>
<tr>
<td>extra_fields</td>
<td>Optional</td>
<td>None</td>
<td>Additional form fields as [(name, type, placeholder, required),
…]</td>
</tr>
<tr>
<td>provider_config</td>
<td>Optional</td>
<td>None</td>
<td>Optional provider configuration</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>FT</strong></td>
<td></td>
<td><strong>FastHTML Form component</strong></td>
</tr>
</tbody>
</table>

``` python
test_func = KeyInputForm
app, rt = create_test_app(theme=DaisyUITheme.LIGHT)

@rt
def index():
    # Test with a custom provider
    return create_test_page(test_func.__doc__.title().split('.')[0].strip(), 
                           test_func(provider="my_custom_service"))
server = start_test_server(app)
display(HTMX())
server.stop()
```

## Multi-Provider Key Form

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-byok/blob/main/cjm_fasthtml_byok/components/forms.py#L167"
target="_blank" style="float:right; font-size:smaller">source</a>

### MultiProviderKeyForm

>  MultiProviderKeyForm (providers:List[str], action:str='/api/keys',
>                            method:str='post',
>                            default_provider:Optional[str]=None,
>                            provider_config:Optional[Dict[str,Any]]=None)

*Create a form that allows selecting from multiple providers with
enhanced UX.*

<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 25%" />
<col style="width: 34%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>providers</td>
<td>List</td>
<td></td>
<td>List of provider identifiers</td>
</tr>
<tr>
<td>action</td>
<td>str</td>
<td>/api/keys</td>
<td>Form action URL</td>
</tr>
<tr>
<td>method</td>
<td>str</td>
<td>post</td>
<td>HTTP method</td>
</tr>
<tr>
<td>default_provider</td>
<td>Optional</td>
<td>None</td>
<td>Initially selected provider</td>
</tr>
<tr>
<td>provider_config</td>
<td>Optional</td>
<td>None</td>
<td>Optional provider configuration</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>FT</strong></td>
<td></td>
<td><strong>FastHTML Form component with provider
selection</strong></td>
</tr>
</tbody>
</table>

``` python
test_func = MultiProviderKeyForm
app, rt = create_test_app(theme=DaisyUITheme.LIGHT)

@rt
def index():
    # Test with custom provider names
    providers = ['my_llm_api', 'custom_service', 'another_provider']
    return create_test_page(test_func.__doc__.title().split('.')[0].strip(), 
                           test_func(providers))
server = start_test_server(app)
display(HTMX())
server.stop()
```

## Key Management Card

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-byok/blob/main/cjm_fasthtml_byok/components/forms.py#L301"
target="_blank" style="float:right; font-size:smaller">source</a>

### KeyManagementCard

>  KeyManagementCard (provider:str, has_key:bool,
>                         masked_key:Optional[str]=None,
>                         created_at:Optional[str]=None,
>                         expires_at:Optional[str]=None,
>                         delete_action:Optional[str]=None,
>                         update_action:Optional[str]=None,
>                         provider_config:Optional[Dict[str,Any]]=None)

*Create a card component for managing a stored API key with enhanced
design.*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>provider</td>
<td>str</td>
<td></td>
<td>Provider identifier</td>
</tr>
<tr>
<td>has_key</td>
<td>bool</td>
<td></td>
<td>Whether a key is stored</td>
</tr>
<tr>
<td>masked_key</td>
<td>Optional</td>
<td>None</td>
<td>Masked version of the key for display</td>
</tr>
<tr>
<td>created_at</td>
<td>Optional</td>
<td>None</td>
<td>When the key was stored</td>
</tr>
<tr>
<td>expires_at</td>
<td>Optional</td>
<td>None</td>
<td>When the key expires</td>
</tr>
<tr>
<td>delete_action</td>
<td>Optional</td>
<td>None</td>
<td>URL for delete action</td>
</tr>
<tr>
<td>update_action</td>
<td>Optional</td>
<td>None</td>
<td>URL for update action</td>
</tr>
<tr>
<td>provider_config</td>
<td>Optional</td>
<td>None</td>
<td>Optional provider configuration</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>FT</strong></td>
<td></td>
<td><strong>Card component for key management</strong></td>
</tr>
</tbody>
</table>

``` python
test_func = KeyManagementCard
app, rt = create_test_app(theme=DaisyUITheme.LIGHT)

@rt
def index():
    # Test with custom provider and optional config
    custom_config = {
        'api_service': {
            'name': 'My API Service',
            'placeholder': 'Enter your API key here...'
        }
    }
    return create_test_page(test_func.__doc__.title().split('.')[0].strip(), 
                           test_func(
                               provider="api_service",
                               has_key=True,
                               masked_key="key-...xyz",
                               created_at="2 hours ago",
                               provider_config=custom_config
                           ))
server = start_test_server(app)
display(HTMX())
server.stop()
```

## Key Manager Dashboard

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-byok/blob/main/cjm_fasthtml_byok/components/forms.py#L500"
target="_blank" style="float:right; font-size:smaller">source</a>

### KeyManagerDashboard

>  KeyManagerDashboard (request, providers:List[str], byok_manager=None,
>                           user_id:Optional[str]=None,
>                           base_url:str='/api/keys',
>                           provider_config:Optional[Dict[str,Any]]=None)

*Create a complete dashboard for managing multiple API keys with
improved layout.*

<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 25%" />
<col style="width: 34%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>request</td>
<td></td>
<td></td>
<td>FastHTML request object</td>
</tr>
<tr>
<td>providers</td>
<td>List</td>
<td></td>
<td>List of provider identifiers to manage</td>
</tr>
<tr>
<td>byok_manager</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr>
<td>user_id</td>
<td>Optional</td>
<td>None</td>
<td>Optional user ID for database storage</td>
</tr>
<tr>
<td>base_url</td>
<td>str</td>
<td>/api/keys</td>
<td>Base URL for API endpoints</td>
</tr>
<tr>
<td>provider_config</td>
<td>Optional</td>
<td>None</td>
<td>Optional provider configuration</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>FT</strong></td>
<td></td>
<td><strong>Dashboard component with all provider cards</strong></td>
</tr>
</tbody>
</table>

``` python
# Test using the actual KeyManagerDashboard function
test_func = KeyManagerDashboard
app, rt = create_test_app(theme=DaisyUITheme.LIGHT)

@rt
def index():
    # Create a mock request object
    class MockRequest:
        def __init__(self):
            self.scope = {}
    
    request = MockRequest()
    
    # Test with custom providers and optional config
    providers = ["llm_service", "embedding_api", "vector_db", "search_api", "analytics", "monitoring"]
    
    # Optional: provide custom config for some providers
    provider_config = {
        'llm_service': {
            'name': 'LLM Service',
            'placeholder': 'Enter your LLM API key'
        },
        'embedding_api': {
            'name': 'Embedding API',
            'placeholder': 'Your embedding API key'
        }
        # Other providers will use auto-generated defaults
    }
    
    # Create the dashboard using the actual function
    dashboard = KeyManagerDashboard(
        request=request,
        providers=providers,
        byok_manager=None,  # No manager, so all will show as no key
        base_url="/api/keys",
        provider_config=provider_config
    )
    
    return create_test_page("Key Manager Dashboard (Using Function)", dashboard)

server = start_test_server(app)
display(HTMX())
server.stop()
```

## Inline Key Input

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-byok/blob/main/cjm_fasthtml_byok/components/forms.py#L593"
target="_blank" style="float:right; font-size:smaller">source</a>

### InlineKeyInput

>  InlineKeyInput (provider:str, input_id:Optional[str]=None,
>                      on_save:Optional[str]=None, compact:bool=True,
>                      provider_config:Optional[Dict[str,Any]]=None)

*Create a compact inline key input component with polished design.*

<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 25%" />
<col style="width: 34%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>provider</td>
<td>str</td>
<td></td>
<td>Provider identifier</td>
</tr>
<tr>
<td>input_id</td>
<td>Optional</td>
<td>None</td>
<td>HTML ID for the input element</td>
</tr>
<tr>
<td>on_save</td>
<td>Optional</td>
<td>None</td>
<td>JavaScript to execute on save (or hx-post URL for HTMX)</td>
</tr>
<tr>
<td>compact</td>
<td>bool</td>
<td>True</td>
<td>Whether to use compact styling</td>
</tr>
<tr>
<td>provider_config</td>
<td>Optional</td>
<td>None</td>
<td>Optional provider configuration</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>FT</strong></td>
<td></td>
<td><strong>Inline input component</strong></td>
</tr>
</tbody>
</table>

``` python
test_func = InlineKeyInput
app, rt = create_test_app(theme=DaisyUITheme.LIGHT)

@rt
def index():
    # Test with custom provider
    return create_test_page(test_func.__doc__.title().split('.')[0].strip(), 
                           test_func(
                               provider="custom_backend",
                               on_save="/api/keys/custom_backend/quick-save"
                           ))
server = start_test_server(app)
display(HTMX())
server.stop()
```

## Tests

``` python
# Test basic key input form with custom provider
form = KeyInputForm(provider="my_service")
assert form.tag == "form"
assert form.attrs['method'] == "post"
assert form.attrs['action'] == "/api/keys/my_service"
print("✓ Basic key input form")

# Test with provider config
config = {
    'openai': {
        'name': 'OpenAI GPT',
        'placeholder': 'sk-...'
    }
}
form_with_config = KeyInputForm(provider="openai", provider_config=config)
assert form_with_config.tag == "form"
print("✓ Key input form with config")

# Test multi-provider form
multi_form = MultiProviderKeyForm(
    providers=["service_a", "service_b", "service_c"],
    default_provider="service_b"
)
assert multi_form.tag == "form"
print("✓ Multi-provider form")

# Test key management card with custom provider
card_with_key = KeyManagementCard(
    provider="custom_api",
    has_key=True,
    masked_key="key-...abc",
    created_at="2 hours ago"
)
assert card_with_key.tag == "div"
print("✓ Key management card with key")

card_without_key = KeyManagementCard(
    provider="another_service",
    has_key=False,
    update_action="/api/keys/another_service"
)
assert card_without_key.tag == "div"
print("✓ Key management card without key")

# Test inline input with custom provider
inline = InlineKeyInput(
    provider="my_llm_service",
    on_save="/api/keys/my_llm_service/quick-save"
)
assert inline.tag == "div"
print("✓ Inline key input")

print("\nAll form component tests passed!")
```

    ✓ Basic key input form
    ✓ Key input form with config
    ✓ Multi-provider form
    ✓ Key management card with key
    ✓ Key management card without key
    ✓ Inline key input

    All form component tests passed!
