# Helpers


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Provider Helpers

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-byok/blob/main/cjm_fasthtml_byok/utils/helpers.py#L17"
target="_blank" style="float:right; font-size:smaller">source</a>

### get_provider_info

>  get_provider_info (provider:str,
>                         provider_config:Optional[Dict[str,Any]]=None)

*Get provider information from config or generate defaults.*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>provider</td>
<td>str</td>
<td></td>
<td>Provider identifier</td>
</tr>
<tr>
<td>provider_config</td>
<td>Optional</td>
<td>None</td>
<td>Optional provider configuration</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>Dict</strong></td>
<td></td>
<td><strong>Provider info dict with defaults</strong></td>
</tr>
</tbody>
</table>

## Format Helpers

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-byok/blob/main/cjm_fasthtml_byok/utils/helpers.py#L34"
target="_blank" style="float:right; font-size:smaller">source</a>

### format_provider_name

>  format_provider_name (provider:str,
>                            provider_config:Optional[Dict[str,Any]]=None)

*Format provider name for display.*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>provider</td>
<td>str</td>
<td></td>
<td>Provider identifier</td>
</tr>
<tr>
<td>provider_config</td>
<td>Optional</td>
<td>None</td>
<td>Optional provider configuration</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>str</strong></td>
<td></td>
<td><strong>Formatted provider name</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-byok/blob/main/cjm_fasthtml_byok/utils/helpers.py#L43"
target="_blank" style="float:right; font-size:smaller">source</a>

### format_key_age

>  format_key_age (created_at:datetime.datetime)

*Format the age of a key for display.*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>created_at</td>
<td>datetime</td>
<td>When the key was created</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>str</strong></td>
<td><strong>Human-readable age string</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-byok/blob/main/cjm_fasthtml_byok/utils/helpers.py#L64"
target="_blank" style="float:right; font-size:smaller">source</a>

### format_expiration

>  format_expiration (expires_at:Optional[datetime.datetime])

*Format expiration time for display.*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>expires_at</td>
<td>Optional</td>
<td>Expiration datetime</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>str</strong></td>
<td><strong>Human-readable expiration string</strong></td>
</tr>
</tbody>
</table>

## Key Summary

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-byok/blob/main/cjm_fasthtml_byok/utils/helpers.py#L86"
target="_blank" style="float:right; font-size:smaller">source</a>

### get_key_summary

>  get_key_summary (byok_manager, request, user_id:Optional[str]=None,
>                       provider_config:Optional[Dict[str,Any]]=None)

*Get a summary of all stored keys.*

<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 25%" />
<col style="width: 34%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>byok_manager</td>
<td></td>
<td></td>
<td>BYOK manager instance</td>
</tr>
<tr>
<td>request</td>
<td></td>
<td></td>
<td>FastHTML request</td>
</tr>
<tr>
<td>user_id</td>
<td>Optional</td>
<td>None</td>
<td>Optional user ID</td>
</tr>
<tr>
<td>provider_config</td>
<td>Optional</td>
<td>None</td>
<td>Optional provider configuration</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>Dict</strong></td>
<td></td>
<td><strong>Summary dictionary with provider info</strong></td>
</tr>
</tbody>
</table>

## Environment Helpers

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-byok/blob/main/cjm_fasthtml_byok/utils/helpers.py#L119"
target="_blank" style="float:right; font-size:smaller">source</a>

### get_env_key

>  get_env_key (provider:str, env_prefix:str='API_KEY_')

*Get an API key from environment variables.*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>provider</td>
<td>str</td>
<td></td>
<td>Provider name</td>
</tr>
<tr>
<td>env_prefix</td>
<td>str</td>
<td>API_KEY_</td>
<td>Environment variable prefix</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>Optional</strong></td>
<td></td>
<td><strong>API key from environment or None</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-fasthtml-byok/blob/main/cjm_fasthtml_byok/utils/helpers.py#L129"
target="_blank" style="float:right; font-size:smaller">source</a>

### import_from_env

>  import_from_env (byok_manager, request, providers:List[str],
>                       user_id:Optional[str]=None, env_prefix:str='API_KEY_')

*Import API keys from environment variables.*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>byok_manager</td>
<td></td>
<td></td>
<td>BYOK manager instance</td>
</tr>
<tr>
<td>request</td>
<td></td>
<td></td>
<td>FastHTML request</td>
</tr>
<tr>
<td>providers</td>
<td>List</td>
<td></td>
<td>List of providers to check</td>
</tr>
<tr>
<td>user_id</td>
<td>Optional</td>
<td>None</td>
<td>Optional user ID</td>
</tr>
<tr>
<td>env_prefix</td>
<td>str</td>
<td>API_KEY_</td>
<td>Environment variable prefix</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>Dict</strong></td>
<td></td>
<td><strong>Dict of provider: success status</strong></td>
</tr>
</tbody>
</table>

## Tests

``` python
# Test provider info with no config
info = get_provider_info('my_custom_provider')
assert info['name'] == 'My Custom Provider'
assert info['placeholder'] == 'Enter your My Custom Provider API key'
print(f"✓ Provider info (no config): {info['name']}")

# Test with custom config
custom_config = {
    'openai': {
        'name': 'OpenAI GPT',
        'key_prefix': 'sk-',
        'docs_url': 'https://platform.openai.com/api-keys',
        'placeholder': 'sk-...'
    }
}
info = get_provider_info('openai', custom_config)
assert info['name'] == 'OpenAI GPT'
assert info['key_prefix'] == 'sk-'
print(f"✓ Provider info (with config): {info['name']}")

# Test formatting
assert format_provider_name('test_provider') == 'Test Provider'
assert format_provider_name('api-service') == 'Api Service'
print("✓ Provider name formatting")

# Test age formatting
now = datetime.now()
assert format_key_age(now) == "Just now"
assert format_key_age(now - timedelta(hours=2)) == "2 hours ago"
assert format_key_age(now - timedelta(days=5)) == "5 days ago"
print("✓ Age formatting")

# Test expiration formatting
assert format_expiration(None) == "Never"
assert format_expiration(now - timedelta(hours=1)) == "Expired"
assert "Expires in" in format_expiration(now + timedelta(hours=5))
print("✓ Expiration formatting")
```

    ✓ Provider info (no config): My Custom Provider
    ✓ Provider info (with config): OpenAI GPT
    ✓ Provider name formatting
    ✓ Age formatting
    ✓ Expiration formatting
